# 可视化分析报告

此报告总结了为“问题一：确定性优化”和“问题二：鲁棒优化”生成的可视化分析图表。所有图表均已保存在 `pics` 文件夹中。

## 问题一 (确定性优化) 可视化

### 1. 数据概览
- **`p1_demand_histogram.svg`**
  - **内容**: 展示了所有100个站点的预测需求量分布。
  - **洞察**: 需求量近似服从正态分布，均值约为0，表明借车和还车需求大致平衡。这为后续的优化提供了基础数据特征。

### 2. 方法一 vs 方法二结果对比
- **`p1_retain_status_comparison.svg`**
  - **内容**: 对比了忽略二次项（方法一）和线性化二次项（方法二）两种优化方法的站点保留决策。
  - **洞察**: 两种方法的决策截然不同。方法一保留了所有站点，而方法二只保留了部分站点。这清楚地表明了目标函数中不同成本项对最终决策的显著影响。

- **`p1_capacity_configuration_comparison.svg`**
  - **内容**: 对比了两种方法对共同保留站点的容量配置。
  - **洞察**: 由于方法一保留了所有站点而方法二只保留了部分，因此没有共同保留的站点，此图无法提供比较。这也进一步印证了两种方法决策的巨大差异。

- **`p1_cost_breakdown_comparison.svg`**
  - **内容**: 以堆叠柱状图的形式，对比了两种方法的总成本及其构成（失败惩罚和调度成本）。
  - **洞察**: 方法一的总成本（23.00）远低于方法二（3078.00）。这是因为方法一忽略了与容量配置相关的成本（空置损失），导致其解在该成本项上被严重低估。这说明在建模时考虑所有相关成本项至关重要。

### 3. 最优解分析 (聚焦方法二)
- **`p1_retained_stations_map.html`** (交互式HTML)
  - **内容**: 使用Plotly创建的交互式散点图，展示了方法二保留站点的空间分布（X轴为站点ID编号，Y轴为预测需求量，点大小为容量）。
  - **洞察**: 保留的站点在需求和容量上呈现一定的分布规律，高需求（正或负）的站点往往配置了更大的容量。

- **`p1_capacity_vs_demand.svg`**
  - **内容**: 散点图展示了保留站点的分配容量与其预测需求量的关系，并与理想匹配线 y=|x| 进行了比较。
  - **洞察**: 大部分点分布在 y=|x| 线附近，表明优化模型较好地实现了容量与需求的匹配。偏离该线的点可能是因为受到了最小容量限制（C_min=10）的影响。

- **`p1_station_efficiency.svg`**
  - **内容**: 柱状图展示了每个保留站点的效率，效率定义为 `min(容量,|需求|) / max(容量,|需求|)`。
  - **洞察**: 大部分保留站点的效率较高（接近1），表明容量配置合理。效率较低的站点可能是因为需求量小但受最低容量限制，或者模型为了平衡其他目标而做出的妥协。

## 问题二 (鲁棒优化) 可视化

### 1. 不确定性场景分析
- **`p2_scenario_demand_comparison.svg`**
  - **内容**: 柱状图对比了5个不确定性场景下的总需求量及其标准差。
  - **洞察**: 不同场景的总需求量和波动性存在显著差异，尤其是最好情况（Scenario_2_Best）和最坏情况（Scenario_1_Worst）之间。这为鲁棒优化模型定义不确定性集合提供了直观依据。

### 2. 鲁棒解 vs 确定性解对比
- **`p2_retain_status_sankey.html`** (交互式HTML)
  - **内容**: 桑基图清晰地展示了从问题一确定性解到问题二鲁棒解的站点状态变化。
  - **洞察**: 几乎所有在确定性解中被保留的站点，在鲁棒解中都被关闭了。这直观地揭示了鲁棒优化的保守性：在面对不确定性时，为了避免最坏情况下的高成本，最优策略是不进行任何投资。

- **`p2_robust_solution_cost_across_scenarios.svg`**
  - **内容**: 折线图展示了鲁棒解（关闭所有站点）在所有5个场景下的成本表现。
  - **洞察**: 在所有场景下，鲁棒解的成本都是0。这验证了模型的正确性，并突显了其在最坏情况（Scenario_2_Best，成本2925.06）下的绝对优势——因为它根本不会产生任何成本。

### 3. 鲁棒解分析
- **`p2_robust_vs_deterministic_cost_analysis.html`** (交互式HTML表格)
  - **内容**: 一个带有样式的HTML表格，详细对比了鲁棒解和确定性解在每个场景下的成本。
  - **洞察**: 表格数据明确显示，虽然鲁棒解在所有场景下的成本都是0，但确定性解在某些场景下（如Scenario_1_Worst）成本可能比鲁棒解的目标值（2925.06）更低。然而，在最坏情况（Scenario_2_Best）下，确定性解的成本（2925.06）与鲁棒解的目标值相同。这表明鲁棒解通过牺牲在其他场景下的潜在收益，换取了在最坏情况下的最优保障。

### 4. 综合对比与洞察
- **`p1_vs_p2_overall_comparison_dashboard.svg`**
  - **内容**: 综合柱状图，对比了问题一和问题二在保留站点数、总容量和关键成本指标上的表现。
  - **洞察**: 图表直观地展示了两种方法的核心差异：确定性优化倾向于积极投资（保留41个站点，总容量1427），而鲁棒优化则极度保守（保留0个站点，总容量0）。在成本方面，确定性解的优化目标成本为3078，而鲁棒解的最坏情况成本目标为2925。这个对比深刻地反映了在确定性环境和不确定性环境下决策逻辑的根本不同。

## 总结

本次可视化分析全面、深入地展示了两个优化问题的输入数据、求解过程和最终结果。通过静态SVG图表和交互式HTML图表的结合，我们不仅能够观察到数据的分布和解的特征，还能动态探索站点之间的关系和成本在不同场景下的变化。特别是桑基图和成本对比表格，以非常专业和炫酷的方式揭示了从确定性决策到鲁棒决策的关键转变，为理解不确定性在优化决策中的作用提供了宝贵的洞察。